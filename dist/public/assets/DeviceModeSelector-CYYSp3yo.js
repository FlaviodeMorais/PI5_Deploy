import{r,u as n,j as e,B as c,S as l}from"./index-inmntaXa.js";const m=r.createContext({mode:"NODEMCU",setMode:()=>{},toggleMode:()=>{},isEmulatorEnabled:!1,emulatorConfig:null,applySystemSettings:async()=>!1});function u(){return r.useContext(m)}function p(){const{mode:a,toggleMode:d,isEmulatorEnabled:t,applySystemSettings:f}=u(),{toast:s}=n(),i=async()=>{if(a==="NODEMCU"&&!t)try{if(!(await fetch("/api/emulator/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updateInterval:5e3,mode:"fluctuating"})})).ok)throw new Error("Falha ao iniciar o emulador");s({title:"Emulador iniciado",description:"O modo de emulação foi ativado com sucesso."})}catch(o){s({title:"Erro",description:`Falha ao iniciar o emulador: ${o instanceof Error?o.message:"Erro desconhecido"}`,variant:"destructive"});return}if(a==="EMULATOR"&&t)try{if(!(await fetch("/api/emulator/stop",{method:"POST"})).ok)throw new Error("Falha ao parar o emulador");s({title:"Emulador parado",description:"O modo de emulação foi desativado com sucesso."})}catch(o){s({title:"Erro",description:`Falha ao parar o emulador: ${o instanceof Error?o.message:"Erro desconhecido"}`,variant:"destructive"});return}d()};return e.jsxs("div",{className:"flex flex-col space-y-2 p-4 bg-card rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:"Fonte de Dados"}),e.jsx(c,{variant:a==="EMULATOR"?"secondary":"default",children:a==="EMULATOR"?"Emulador":"Hardware Real"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm ${a==="NODEMCU"?"font-medium":"text-muted-foreground"}`,children:[e.jsx("i",{className:"fas fa-microchip mr-1.5"})," NodeMCU"]}),e.jsx(l,{checked:a==="EMULATOR",onCheckedChange:i,className:"data-[state=checked]:bg-blue-600"}),e.jsxs("span",{className:`text-sm ${a==="EMULATOR"?"font-medium":"text-muted-foreground"}`,children:[e.jsx("i",{className:"fas fa-laptop-code mr-1.5"})," Emulador"]})]})}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:a==="NODEMCU"?"Usando dados do hardware físico NodeMCU":"Usando dados simulados do emulador"})]})}export{p as DeviceModeSelector};
